---
import { Icon } from 'astro-icon/components';
import { getCollection } from 'astro:content';

const allBlogPosts = await getCollection('blog');
const recentBlogPosts = allBlogPosts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<footer class="bg-secondary text-secondary-content pt-24 pb-12 rounded-t-[3rem] mt-auto">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-12 lg:gap-8 mb-20">
      
      <!-- Brand Column -->
      <div class="lg:col-span-4">
        <a href="/" class="inline-block mb-6">
          <img src="/assets/logo.svg" alt="MD Homecare Logo" class="h-10 w-auto" />
        </a>
        <p class="text-secondary-content/60 text-base leading-relaxed mb-8 max-w-sm">
          Empowering independence through compassionate, professional in-home care services across Australia.
        </p>
        
        <div class="flex flex-col gap-3">
             <a href="tel:+61863869999" class="flex items-center gap-3 text-white font-medium hover:text-primary transition-colors group">
                <span class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center group-hover:bg-primary/20 transition-colors">
                    <Icon name="hugeicons:call-02" class="h-5 w-5" />
                </span>
                08 6386 9999
             </a>
        </div>
      </div>

      <!-- Links Column 1 -->
      <div class="lg:col-span-2 lg:col-start-6">
        <h4 class="text-white font-bold mb-6">Company</h4>
        <ul class="space-y-4">
          <li><a href="/" class="text-secondary-content/60 hover:text-white transition-colors">Home</a></li>
          <li><a href="/about" class="text-secondary-content/60 hover:text-white transition-colors">About Us</a></li>
          <li><a href="/blog" class="text-secondary-content/60 hover:text-white transition-colors">Blog</a></li>
          <li><a href="/jobs" class="text-secondary-content/60 hover:text-white transition-colors">Careers</a></li>
          <li><a href="/contact" class="text-secondary-content/60 hover:text-white transition-colors">Contact</a></li>
        </ul>
      </div>

      <!-- Links Column 2 -->
      <div class="lg:col-span-2">
        <h4 class="text-white font-bold mb-6">Services</h4>
        <ul class="space-y-4">
          <li><a href="/services/disability-services" class="text-secondary-content/60 hover:text-white transition-colors">Disability Services</a></li>
          <li><a href="/services/personal-care" class="text-secondary-content/60 hover:text-white transition-colors">Personal Care</a></li>
          <li><a href="/services/domestic-assistance" class="text-secondary-content/60 hover:text-white transition-colors">Domestic Assistance</a></li>
          <li><a href="/services/support-workers" class="text-secondary-content/60 hover:text-white transition-colors">Support Workers</a></li>
          <li><a href="/services/sil-services" class="text-secondary-content/60 hover:text-white transition-colors">SIL Services</a></li>
        </ul>
      </div>

      <!-- Links Column 3 - Tools -->
      <div class="lg:col-span-2">
        <h4 class="text-white font-bold mb-6">Free Tools</h4>
        <ul class="space-y-4">
          <li><a href="/tools/ndis-pay-rate-calculator" class="text-secondary-content/60 hover:text-white transition-colors">NDIS Pay Rates</a></li>
          <li><a href="/tools/ndis-code-lookup" class="text-secondary-content/60 hover:text-white transition-colors">NDIS Code Lookup</a></li>
          <li><a href="/tools/support-worker-income-calculator" class="text-secondary-content/60 hover:text-white transition-colors">Income Calculator</a></li>
          <li><a href="/tools/ndis-screening-calculator" class="text-secondary-content/60 hover:text-white transition-colors">Screening Costs</a></li>
          <li><a href="/tools/home-care-package-calculator" class="text-secondary-content/60 hover:text-white transition-colors">HCP Calculator</a></li>
          <li><a href="/tools/ndis-budget-planner" class="text-secondary-content/60 hover:text-white transition-colors">Budget Planner</a></li>
          <li><a href="/tools/ndis-therapy-calculator" class="text-secondary-content/60 hover:text-white transition-colors">Therapy Hours</a></li>
          <li><a href="/tools" class="text-primary hover:text-white transition-colors font-medium">All 15 Tools â†’</a></li>
        </ul>
      </div>

      <!-- Blog Column -->
      <div class="lg:col-span-12 border-t border-white/5 pt-12 mt-4">
         <div class="flex items-center justify-between mb-8">
            <h4 class="text-white font-bold">Latest Updates</h4>
            <a href="/blog" class="text-sm font-medium text-primary hover:text-white transition-colors flex items-center gap-2">
                View All Posts 
                <Icon name="hugeicons:arrow-right-01" class="h-4 w-4" />
            </a>
         </div>
         
         <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            {recentBlogPosts.map(post => (
                <a href={`/blog/${post.slug}`} class="group block bg-white/5 rounded-2xl p-5 hover:bg-white/10 transition-all border border-white/5 hover:border-white/10">
                    <span class="text-xs text-secondary-content/40 uppercase tracking-wider mb-2 block">{post.data.pubDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</span>
                    <h5 class="text-white font-medium text-base group-hover:text-primary transition-colors line-clamp-2 leading-snug">{post.data.title}</h5>
                </a>
            ))}
         </div>
      </div>

    </div>

    <!-- Bottom Bar -->
    <div class="pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-secondary-content/40">
       <p>&copy; {new Date().getFullYear()} MD Homecare. All rights reserved.</p>
       <div class="flex gap-6">
         <a href="/privacy" class="hover:text-white transition-colors">Privacy Policy</a>
         <a href="/terms" class="hover:text-white transition-colors">Terms of Service</a>
       </div>
    </div>

  </div>
</footer>

