---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import EligibilityChecker from '../../components/EligibilityChecker.astro';

// Define TypeScript interfaces
interface SuburbInfo {
  state: string;
  region: string;
}

interface SuburbData {
  [key: string]: SuburbInfo;
}

interface SuburbWithName extends SuburbInfo {
  slug: string;
  name: string;
}

interface SuburbsByState {
  [key: string]: SuburbWithName[];
}

// Hardcode suburbs data
const suburbsData: SuburbData = {
  // Greater Sydney
  "sydney": { "state": "NSW", "region": "Greater Sydney" },
  "cbd": { "state": "NSW", "region": "Greater Sydney" },
  "haymarket": { "state": "NSW", "region": "Greater Sydney" },
  "the-rocks": { "state": "NSW", "region": "Greater Sydney" },
  "barangaroo": { "state": "NSW", "region": "Greater Sydney" },
  "pyrmont": { "state": "NSW", "region": "Greater Sydney" },
  "ultimo": { "state": "NSW", "region": "Greater Sydney" },
  "chippendale": { "state": "NSW", "region": "Greater Sydney" },
  "surry-hills": { "state": "NSW", "region": "Greater Sydney" },
  "darlinghurst": { "state": "NSW", "region": "Greater Sydney" },
  "potts-point": { "state": "NSW", "region": "Greater Sydney" },
  "elizabeth-bay": { "state": "NSW", "region": "Greater Sydney" },
  "rushcutters-bay": { "state": "NSW", "region": "Greater Sydney" },
  "woolloomooloo": { "state": "NSW", "region": "Greater Sydney" },
  "redfern": { "state": "NSW", "region": "Greater Sydney" },
  "waterloo": { "state": "NSW", "region": "Greater Sydney" },
  "zetland": { "state": "NSW", "region": "Greater Sydney" },
  "alexandria": { "state": "NSW", "region": "Greater Sydney" },
  "erskineville": { "state": "NSW", "region": "Greater Sydney" },
  
  // Eastern Suburbs
  "bondi": { "state": "NSW", "region": "Eastern Suburbs" },
  "bondi-beach": { "state": "NSW", "region": "Eastern Suburbs" },
  "bondi-junction": { "state": "NSW", "region": "Eastern Suburbs" },
  "bronte": { "state": "NSW", "region": "Eastern Suburbs" },
  "clovelly": { "state": "NSW", "region": "Eastern Suburbs" },
  "coogee": { "state": "NSW", "region": "Eastern Suburbs" },
  "maroubra": { "state": "NSW", "region": "Eastern Suburbs" },
  "kensington": { "state": "NSW", "region": "Eastern Suburbs" },
  "randwick": { "state": "NSW", "region": "Eastern Suburbs" },
  "vaucluse": { "state": "NSW", "region": "Eastern Suburbs" },
  "rose-bay": { "state": "NSW", "region": "Eastern Suburbs" },
  "double-bay": { "state": "NSW", "region": "Eastern Suburbs" },
  "bellevue-hill": { "state": "NSW", "region": "Eastern Suburbs" },
  "dover-heights": { "state": "NSW", "region": "Eastern Suburbs" },
  "queens-park": { "state": "NSW", "region": "Eastern Suburbs" },
  "pagewood": { "state": "NSW", "region": "Eastern Suburbs" },
  "eastgardens": { "state": "NSW", "region": "Eastern Suburbs" },
  "little-bay": { "state": "NSW", "region": "Eastern Suburbs" },
  "la-perouse": { "state": "NSW", "region": "Eastern Suburbs" },
  
  // Inner West
  "burwood": { "state": "NSW", "region": "Inner West" },
  "strathfield": { "state": "NSW", "region": "Inner West" },
  "newtown": { "state": "NSW", "region": "Inner West" },
  "marrickville": { "state": "NSW", "region": "Inner West" },
  "dulwich-hill": { "state": "NSW", "region": "Inner West" },
  "summer-hill": { "state": "NSW", "region": "Inner West" },
  "ashfield": { "state": "NSW", "region": "Inner West" },
  "leichhardt": { "state": "NSW", "region": "Inner West" },
  "balmain": { "state": "NSW", "region": "Inner West" },
  "rozelle": { "state": "NSW", "region": "Inner West" },
  "lilyfield": { "state": "NSW", "region": "Inner West" },
  "annandale": { "state": "NSW", "region": "Inner West" },
  "petersham": { "state": "NSW", "region": "Inner West" },
  "stanmore": { "state": "NSW", "region": "Inner West" },
  "enmore": { "state": "NSW", "region": "Inner West" },
  "croydon": { "state": "NSW", "region": "Inner West" },
  "croydon-park": { "state": "NSW", "region": "Inner West" },
  "haberfield": { "state": "NSW", "region": "Inner West" },
  "five-dock": { "state": "NSW", "region": "Inner West" },
  "drummoyne": { "state": "NSW", "region": "Inner West" },
  "glebe": { "state": "NSW", "region": "Inner West" },
  
  // North Shore
  "chatswood": { "state": "NSW", "region": "North Shore" },
  "st-leonards": { "state": "NSW", "region": "North Shore" },
  "artarmon": { "state": "NSW", "region": "Lower North Shore" },
  "willoughby": { "state": "NSW", "region": "Lower North Shore" },
  "naremburn": { "state": "NSW", "region": "Lower North Shore" },
  "northbridge": { "state": "NSW", "region": "Lower North Shore" },
  "cammeray": { "state": "NSW", "region": "Lower North Shore" },
  "cremorne": { "state": "NSW", "region": "Lower North Shore" },
  "neutral-bay": { "state": "NSW", "region": "Lower North Shore" },
  "mosman": { "state": "NSW", "region": "Lower North Shore" },
  "north-sydney": { "state": "NSW", "region": "Lower North Shore" },
  "kirribilli": { "state": "NSW", "region": "Lower North Shore" },
  "lavender-bay": { "state": "NSW", "region": "Lower North Shore" },
  "wollstonecraft": { "state": "NSW", "region": "Lower North Shore" },
  "greenwich": { "state": "NSW", "region": "Lower North Shore" },
  "lane-cove": { "state": "NSW", "region": "Lower North Shore" },
  "riverview": { "state": "NSW", "region": "Lower North Shore" },
  "longueville": { "state": "NSW", "region": "Lower North Shore" },
  
  // Upper North Shore
  "gordon": { "state": "NSW", "region": "Upper North Shore" },
  "killara": { "state": "NSW", "region": "Upper North Shore" },
  "lindfield": { "state": "NSW", "region": "Upper North Shore" },
  "roseville": { "state": "NSW", "region": "Upper North Shore" },
  "pymble": { "state": "NSW", "region": "Upper North Shore" },
  "turramurra": { "state": "NSW", "region": "Upper North Shore" },
  "wahroonga": { "state": "NSW", "region": "Upper North Shore" },
  "warrawee": { "state": "NSW", "region": "Upper North Shore" },
  "st-ives": { "state": "NSW", "region": "Upper North Shore" },
  "hornsby": { "state": "NSW", "region": "Upper North Shore" },
  "waitara": { "state": "NSW", "region": "Upper North Shore" },
  "asquith": { "state": "NSW", "region": "Upper North Shore" },
  "berowra": { "state": "NSW", "region": "Upper North Shore" },
  
  // Northern Suburbs
  "ryde": { "state": "NSW", "region": "Northern Sydney" },
  "eastwood": { "state": "NSW", "region": "Northern Sydney" },
  "epping": { "state": "NSW", "region": "Northern Sydney" },
  "macquarie-park": { "state": "NSW", "region": "Northern Sydney" },
  "north-ryde": { "state": "NSW", "region": "Northern Sydney" },
  "marsfield": { "state": "NSW", "region": "Northern Sydney" },
  "west-ryde": { "state": "NSW", "region": "Northern Sydney" },
  "meadowbank": { "state": "NSW", "region": "Northern Sydney" },
  "denistone": { "state": "NSW", "region": "Northern Sydney" },
  "putney": { "state": "NSW", "region": "Northern Sydney" },
  "gladesville": { "state": "NSW", "region": "Northern Sydney" },
  "hunters-hill": { "state": "NSW", "region": "Northern Sydney" },
  
  // Northern Beaches
  "manly": { "state": "NSW", "region": "Northern Beaches" },
  "dee-why": { "state": "NSW", "region": "Northern Beaches" },
  "brookvale": { "state": "NSW", "region": "Northern Beaches" },
  "freshwater": { "state": "NSW", "region": "Northern Beaches" },
  "curl-curl": { "state": "NSW", "region": "Northern Beaches" },
  "queenscliff": { "state": "NSW", "region": "Northern Beaches" },
  "fairlight": { "state": "NSW", "region": "Northern Beaches" },
  "balgowlah": { "state": "NSW", "region": "Northern Beaches" },
  "seaforth": { "state": "NSW", "region": "Northern Beaches" },
  "narrabeen": { "state": "NSW", "region": "Northern Beaches" },
  "collaroy": { "state": "NSW", "region": "Northern Beaches" },
  "avalon": { "state": "NSW", "region": "Northern Beaches" },
  "newport": { "state": "NSW", "region": "Northern Beaches" },
  "mona-vale": { "state": "NSW", "region": "Northern Beaches" },
  "palm-beach": { "state": "NSW", "region": "Northern Beaches" },
  
  // Hills District
  "castle-hill": { "state": "NSW", "region": "Hills District" },
  "baulkham-hills": { "state": "NSW", "region": "Hills District" },
  "bella-vista": { "state": "NSW", "region": "Hills District" },
  "kellyville": { "state": "NSW", "region": "Hills District" },
  "rouse-hill": { "state": "NSW", "region": "Hills District" },
  "pennant-hills": { "state": "NSW", "region": "Hills District" },
  "cherrybrook": { "state": "NSW", "region": "Hills District" },
  "west-pennant-hills": { "state": "NSW", "region": "Hills District" },
  "northmead": { "state": "NSW", "region": "Hills District" },
  "winston-hills": { "state": "NSW", "region": "Hills District" },
  "north-rocks": { "state": "NSW", "region": "Hills District" },
  "carlingford": { "state": "NSW", "region": "Hills District" },
  
  // Western Sydney
  "parramatta": { "state": "NSW", "region": "Western Sydney" },
  "penrith": { "state": "NSW", "region": "Western Sydney" },
  "blacktown": { "state": "NSW", "region": "Western Sydney" },
  "westmead": { "state": "NSW", "region": "Western Sydney" },
  "wentworthville": { "state": "NSW", "region": "Western Sydney" },
  "toongabbie": { "state": "NSW", "region": "Western Sydney" },
  "seven-hills": { "state": "NSW", "region": "Western Sydney" },
  "kings-langley": { "state": "NSW", "region": "Western Sydney" },
  "kings-park": { "state": "NSW", "region": "Western Sydney" },
  "prospect": { "state": "NSW", "region": "Western Sydney" },
  "girraween": { "state": "NSW", "region": "Western Sydney" },
  "pemulwuy": { "state": "NSW", "region": "Western Sydney" },
  "greystanes": { "state": "NSW", "region": "Western Sydney" },
  "merrylands": { "state": "NSW", "region": "Western Sydney" },
  "guildford": { "state": "NSW", "region": "Western Sydney" },
  "auburn": { "state": "NSW", "region": "Western Sydney" },
  "granville": { "state": "NSW", "region": "Western Sydney" },
  "harris-park": { "state": "NSW", "region": "Western Sydney" },
  "st-marys": { "state": "NSW", "region": "Western Sydney" },
  "mount-druitt": { "state": "NSW", "region": "Western Sydney" },
  "rooty-hill": { "state": "NSW", "region": "Western Sydney" },
  "doonside": { "state": "NSW", "region": "Western Sydney" },
  "quakers-hill": { "state": "NSW", "region": "Western Sydney" },
  
  // South Western Sydney
  "liverpool": { "state": "NSW", "region": "South Western Sydney" },
  "fairfield": { "state": "NSW", "region": "South Western Sydney" },
  "cabramatta": { "state": "NSW", "region": "South Western Sydney" },
  "bankstown": { "state": "NSW", "region": "South Western Sydney" },
  "revesby": { "state": "NSW", "region": "South Western Sydney" },
  "padstow": { "state": "NSW", "region": "South Western Sydney" },
  "punchbowl": { "state": "NSW", "region": "South Western Sydney" },
  "yagoona": { "state": "NSW", "region": "South Western Sydney" },
  "bass-hill": { "state": "NSW", "region": "South Western Sydney" },
  "chester-hill": { "state": "NSW", "region": "South Western Sydney" },
  "sefton": { "state": "NSW", "region": "South Western Sydney" },
  "birrong": { "state": "NSW", "region": "South Western Sydney" },
  "regents-park": { "state": "NSW", "region": "South Western Sydney" },
  "berala": { "state": "NSW", "region": "South Western Sydney" },
  "lidcombe": { "state": "NSW", "region": "South Western Sydney" },
  "condell-park": { "state": "NSW", "region": "South Western Sydney" },
  "greenacre": { "state": "NSW", "region": "South Western Sydney" },
  "chullora": { "state": "NSW", "region": "South Western Sydney" },
  "villawood": { "state": "NSW", "region": "South Western Sydney" },
  "canley-vale": { "state": "NSW", "region": "South Western Sydney" },
  "canley-heights": { "state": "NSW", "region": "South Western Sydney" },
  "warwick-farm": { "state": "NSW", "region": "South Western Sydney" },
  "casula": { "state": "NSW", "region": "South Western Sydney" },
  "prestons": { "state": "NSW", "region": "South Western Sydney" },
  "hoxton-park": { "state": "NSW", "region": "South Western Sydney" },
  "west-hoxton": { "state": "NSW", "region": "South Western Sydney" },
  "middleton-grange": { "state": "NSW", "region": "South Western Sydney" },
  
  // St George
  "hurstville": { "state": "NSW", "region": "St George" },
  "kogarah": { "state": "NSW", "region": "St George" },
  "rockdale": { "state": "NSW", "region": "St George" },
  "brighton-le-sands": { "state": "NSW", "region": "St George" },
  "sans-souci": { "state": "NSW", "region": "St George" },
  "ramsgate": { "state": "NSW", "region": "St George" },
  "monterey": { "state": "NSW", "region": "St George" },
  "dolls-point": { "state": "NSW", "region": "St George" },
  "sandringham": { "state": "NSW", "region": "St George" },
  "beverly-hills": { "state": "NSW", "region": "St George" },
  "kingsgrove": { "state": "NSW", "region": "St George" },
  "bexley": { "state": "NSW", "region": "St George" },
  "carlton": { "state": "NSW", "region": "St George" },
  "allawah": { "state": "NSW", "region": "St George" },
  "mortdale": { "state": "NSW", "region": "St George" },
  "penshurst": { "state": "NSW", "region": "St George" },
  "oatley": { "state": "NSW", "region": "St George" },
  
  // Sutherland Shire
  "cronulla": { "state": "NSW", "region": "Sutherland Shire" },
  "sutherland": { "state": "NSW", "region": "Sutherland Shire" },
  "miranda": { "state": "NSW", "region": "Sutherland Shire" },
  "caringbah": { "state": "NSW", "region": "Sutherland Shire" },
  "gymea": { "state": "NSW", "region": "Sutherland Shire" },
  "engadine": { "state": "NSW", "region": "Sutherland Shire" },
  "sylvania": { "state": "NSW", "region": "Sutherland Shire" },
  "jannali": { "state": "NSW", "region": "Sutherland Shire" },
  "como": { "state": "NSW", "region": "Sutherland Shire" },
  "oyster-bay": { "state": "NSW", "region": "Sutherland Shire" },
  "woolooware": { "state": "NSW", "region": "Sutherland Shire" },
  "loftus": { "state": "NSW", "region": "Sutherland Shire" },
  "yarrawarrah": { "state": "NSW", "region": "Sutherland Shire" },
  "grays-point": { "state": "NSW", "region": "Sutherland Shire" },
  "kirrawee": { "state": "NSW", "region": "Sutherland Shire" },
  "kareela": { "state": "NSW", "region": "Sutherland Shire" },
  "yowie-bay": { "state": "NSW", "region": "Sutherland Shire" },
  "lilli-pilli": { "state": "NSW", "region": "Sutherland Shire" },
  "port-hacking": { "state": "NSW", "region": "Sutherland Shire" },
  "newcastle": { "state": "NSW", "region": "Hunter Region" },
  "wollongong": { "state": "NSW", "region": "Illawarra" },
  "gosford": { "state": "NSW", "region": "Central Coast" },
  "bathurst": { "state": "NSW", "region": "Central West" },
  "tamworth": { "state": "NSW", "region": "New England" },
  "dubbo": { "state": "NSW", "region": "Central West" },
  "byron-bay": { "state": "NSW", "region": "Northern Rivers" },
  "melbourne": { "state": "VIC", "region": "Greater Melbourne" },
  "brunswick": { "state": "VIC", "region": "Inner North" },
  "footscray": { "state": "VIC", "region": "Inner West" },
  "brighton": { "state": "VIC", "region": "Bayside" },
  "geelong": { "state": "VIC", "region": "Barwon" },
  "ballarat": { "state": "VIC", "region": "Central Highlands" },
  "bendigo": { "state": "VIC", "region": "Loddon" },
  "frankston": { "state": "VIC", "region": "Mornington Peninsula" },
  "st-kilda": { "state": "VIC", "region": "Inner South" },
  "richmond": { "state": "VIC", "region": "Inner East" },
  "dandenong": { "state": "VIC", "region": "South East" },
  "werribee": { "state": "VIC", "region": "Western Melbourne" },
  "toorak": { "state": "VIC", "region": "Inner East" },
  "mildura": { "state": "VIC", "region": "Mallee" },
  "brisbane": { "state": "QLD", "region": "Greater Brisbane" },
  "gold-coast": { "state": "QLD", "region": "South East Queensland" },
  "sunshine-coast": { "state": "QLD", "region": "South East Queensland" },
  "cairns": { "state": "QLD", "region": "Far North Queensland" },
  "townsville": { "state": "QLD", "region": "North Queensland" },
  "toowoomba": { "state": "QLD", "region": "Darling Downs" },
  "mackay": { "state": "QLD", "region": "Central Queensland" },
  "rockhampton": { "state": "QLD", "region": "Central Queensland" },
  "bundaberg": { "state": "QLD", "region": "Wide Bay Burnett" },
  "hervey-bay": { "state": "QLD", "region": "Wide Bay Burnett" },
  "southport": { "state": "QLD", "region": "Gold Coast" },
  "west-end": { "state": "QLD", "region": "Inner Brisbane" },
  "fortitude-valley": { "state": "QLD", "region": "Inner Brisbane" },
  "perth": { "state": "WA", "region": "Greater Perth" },
  "fremantle": { "state": "WA", "region": "Greater Perth" },
  "joondalup": { "state": "WA", "region": "Northern Perth" },
  "mandurah": { "state": "WA", "region": "Peel" },
  "bunbury": { "state": "WA", "region": "South West" },
  "geraldton": { "state": "WA", "region": "Mid West" },
  "kalgoorlie": { "state": "WA", "region": "Goldfields-Esperance" },
  "broome": { "state": "WA", "region": "Kimberley" },
  "scarborough": { "state": "WA", "region": "Coastal Perth" },
  "subiaco": { "state": "WA", "region": "Inner Perth" },
  "adelaide": { "state": "SA", "region": "Greater Adelaide" },
  "glenelg": { "state": "SA", "region": "Western Adelaide" },
  "mount-gambier": { "state": "SA", "region": "Limestone Coast" },
  "whyalla": { "state": "SA", "region": "Eyre Peninsula" },
  "port-augusta": { "state": "SA", "region": "Far North" },
  "port-lincoln": { "state": "SA", "region": "Eyre Peninsula" },
  "victor-harbor": { "state": "SA", "region": "Fleurieu Peninsula" },
  "norwood": { "state": "SA", "region": "Eastern Adelaide" },
  "port-adelaide": { "state": "SA", "region": "Western Adelaide" },
  "hobart": { "state": "TAS", "region": "Greater Hobart" },
  "launceston": { "state": "TAS", "region": "Northern Tasmania" },
  "devonport": { "state": "TAS", "region": "North West" },
  "burnie": { "state": "TAS", "region": "North West" },
  "sandy-bay": { "state": "TAS", "region": "Greater Hobart" },
  "kingston": { "state": "TAS", "region": "Greater Hobart" },
  "darwin": { "state": "NT", "region": "Top End" },
  "alice-springs": { "state": "NT", "region": "Central Australia" },
  "palmerston": { "state": "NT", "region": "Top End" },
  "katherine": { "state": "NT", "region": "Katherine Region" },
  "nhulunbuy": { "state": "NT", "region": "East Arnhem" },
  "canberra": { "state": "ACT", "region": "Capital Region" },
  "belconnen": { "state": "ACT", "region": "North Canberra" },
  "woden": { "state": "ACT", "region": "South Canberra" },
  "tuggeranong": { "state": "ACT", "region": "South Canberra" },
  "gungahlin": { "state": "ACT", "region": "North Canberra" },
  "queanbeyan": { "state": "NSW", "region": "Capital Region" },
  "campbelltown": { "state": "NSW", "region": "Macarthur" }
};

// Generate static paths for all service pages
export async function getStaticPaths() {
  const serviceEntries = await getCollection('services');
  return serviceEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

// Get the service for the current page
const { entry } = Astro.props;
const { Content } = await entry.render();

// Format suburb name for display (convert slug to title case)
const formatSuburbName = (slug: string): string => {
  return slug
    .split('-')
    .map((word: string) => word.charAt(0).toUpperCase() + word.slice(1))
    .join(' ');
};

// Get related services in the same category
const allServices = await getCollection('services');
const relatedServices = allServices
  .filter(service => 
    service.data.category === entry.data.category && 
    service.slug !== entry.slug
  )
  .slice(0, 3); // Limit to 3 related services

// Group suburbs by state
const suburbsByState: SuburbsByState = {};
Object.entries(suburbsData).forEach(([slug, info]) => {
  if (!suburbsByState[info.state]) {
    suburbsByState[info.state] = [];
  }
  suburbsByState[info.state].push({ slug, name: formatSuburbName(slug), ...info });
});

// Sort suburbs alphabetically within each state
Object.keys(suburbsByState).forEach(state => {
  suburbsByState[state].sort((a: SuburbWithName, b: SuburbWithName) => a.name.localeCompare(b.name));
});

// Sort states
const sortedStates = Object.keys(suburbsByState).sort();

// Create a generic title and description with 'Australia' instead of {suburb}
const genericTitle = entry.data.title.replace(/{suburb}/g, 'Australia');
const genericDescription = entry.data.description.replace(/{suburb}/g, 'Australia');
---

<style is:global>
	body, html {
		margin: 0;
		padding: 0;
		overflow-x: hidden;
		scroll-behavior: smooth;
	}
	
	main {
		padding: 0 !important;
		margin: 0 !important;
		overflow-x: hidden;
		width: 100%;
	}
</style>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [{
    "@type": "Question",
    "name": "What services are available through MD Home Care?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "MD Home Care offers a comprehensive range of services including personal care, nursing care, allied health services, meal preparation, continence management, mobility equipment, transport assistance, home cleaning, home modifications, social support, and respite care. The exact services available may vary by location and individual needs."
    }
  }, {
    "@type": "Question",
    "name": "How do I access MD Home Care services?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "To access our services, you can contact us directly through our website or phone. We'll assess your needs and discuss available services in your area. We can help connect you with appropriate funding options like NDIS, Home Care Packages, or private payment arrangements."
    }
  }, {
    "@type": "Question",
    "name": "What areas do you service?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "We provide services across multiple regions in Australia. You can check service availability in your specific suburb by using our location search tool on the website. We're continuously expanding our service areas to help more people access quality care."
    }
  }, {
    "@type": "Question",
    "name": "What qualifications do your care workers have?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "All our care workers are qualified professionals with relevant certifications in their fields. They undergo regular training, have current police checks, and are fully insured. Our team includes registered nurses, allied health professionals, and qualified support workers."
    }
  }, {
    "@type": "Question",
    "name": "How are services priced?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "Service pricing varies depending on the type of service, duration, and funding arrangement (NDIS, Home Care Package, or private). We provide transparent pricing information and can discuss costs during your initial consultation. We work to ensure our services remain accessible and affordable."
    }
  }]
}
</script>

<BaseLayout 
  title={`${genericTitle} | MD Home Care`} 
  description={genericDescription}
>
  <div class="service-container">
    <article class="service-page">
      <header class="service-hero" style={entry.data.image ? `background-image: url(${entry.data.image})` : ''}>
        <div class="hero-overlay"></div>
        <div class="hero-content">
          <div class="category-tag-container">
            <div class="category-tag">{entry.data.category}</div>
            <div class="avatar-container">
              <img src="/assets/avatar.webp" alt="MD Home Care Team Member" class="avatar-image" />
            </div>
          </div>
          <h1>
            <span class="main-title">{genericTitle}</span>
          </h1>
          <p class="service-description">{genericDescription}</p>
          
          <div class="hero-cta">
            <a href="tel:+61863869999" class="cta-primary pulse-animation">
              <div class="cta-text">
                <span class="desktop-text">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="phone-icon">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                  </svg>
                  08 6386 9999
                </span>
                <span class="mobile-text">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="phone-icon">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                  </svg>
                  Call Now
                </span>
              </div>
            </a>
            <a href="/contact" class="cta-secondary">Message</a>
          </div>
          <div class="trust-signal">
            <div class="rating-container">
              <div class="stars">★★★★<span class="star-half">★</span></div>
              <span class="rating-text">4.7 (45 verified reviews)</span>
            </div>
          </div>
        </div>
      </header>
      
      <!-- Eligibility Checker Tool - Will be injected into content via JavaScript -->
      <div id="eligibility-checker-template" style="display: none;">
        <EligibilityChecker />
      </div>
      
      <div class="service-content" id="learn-more">
        <div class="service-body">
          <div id="content-container">
            <Content />
          </div>
        </div>
        
        <div class="service-cta-banner">
          <div class="cta-content">
            <h3>Ready to experience our service?</h3>
            <p>Contact us today to discuss how we can help you or your loved ones.</p>
          </div>
          <div class="cta-buttons">
            <a href="/contact" class="primary-button">Contact Us</a>
          </div>
        </div>
      </div>
      
      <section class="locations-section">
        <div class="section-header">
          <h2>Find this service in your area</h2>
          <p>Select your location to see specific information about this service in your suburb.</p>
        </div>
        
        <div class="location-search">
          <input type="text" id="suburb-search" placeholder="Search for your suburb..." />
        </div>
        
        <div class="states-container">
          {sortedStates.map(state => (
            <div class="state-section">
              <h3>{state}</h3>
              <ul class="suburbs-grid">
                {suburbsByState[state].map((suburb) => (
                  <li class="suburb-item">
                    <a href={`/services/${entry.slug}/${suburb.slug}`} class="suburb-link">
                      <span class="suburb-name">{suburb.name}</span>
                      <span class="region-name">{suburb.region}</span>
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </section>
      
      {relatedServices.length > 0 && (
        <aside class="related-services">
          <h2>Related Services</h2>
          <div class="related-grid">
            {relatedServices.map((service) => (
              <div class="related-card">
                <h3>{service.data.title.replace(/{suburb}/g, 'Australia')}</h3>
                <p>{service.data.description.replace(/{suburb}/g, 'Australia')}</p>
                <a href={`/services/${service.slug}`} class="learn-more">Learn More →</a>
              </div>
            ))}
          </div>
        </aside>
      )}
      
      <footer class="service-footer">
        <div class="navigation">
          <a href="/services" class="back-link">← Back to Services</a>
        </div>
      </footer>
    </article>
  </div>
</BaseLayout>

<style>
  .service-container {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0;
  }

  .service-hero {
    position: relative;
    min-height: 100vh;
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    margin: 0;
    isolation: isolate;
    width: 100vw;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    z-index: 1;
  }

  /* iOS fix for background images */
  @supports (-webkit-touch-callout: none) {
    .service-hero {
      background-attachment: scroll;
    }
  }

  .hero-overlay {
    position: absolute;
    inset: 0;
    background: none;
  }

  .hero-content {
    position: relative;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    color: var(--text-color);
    padding: 3.5rem;
    background: rgba(255, 255, 255, 0.45);
    backdrop-filter: blur(12px);
    border-radius: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.6);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  }

  .main-title {
    font-size: 3.5rem;
    font-weight: 800;
    line-height: 1.1;
    margin: 1.5rem 0;
    display: block;
    letter-spacing: -0.02em;
    color: var(--text-color);
  }

  .service-description {
    font-size: 1.25rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    font-weight: 400;
    color: var(--text-light);
  }

  .category-tag-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .category-tag {
    display: inline-block;
    background: rgba(var(--primary-rgb), 0.1);
    padding: 0.6rem 1.2rem;
    border-radius: 3rem;
    font-size: 0.9rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(var(--primary-rgb), 0.2);
    color: var(--primary-color);
    text-shadow: none;
  }

  .avatar-container {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .avatar-image {
    width: 40px;
    height: 40px;
    object-fit: cover;
    border-radius: 50%;
    border: 2px solid rgba(var(--primary-rgb), 0.3);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .keyword-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin: 2rem 0;
    justify-content: center;
  }

  .tag {
    background: rgba(var(--primary-rgb), 0.05);
    padding: 0.5rem 1.2rem;
    border-radius: 2rem;
    font-size: 0.9rem;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(var(--primary-rgb), 0.1);
    transition: all 0.3s ease;
    color: var(--primary-color);
    text-shadow: none;
  }

  .tag:hover {
    background: rgba(var(--primary-rgb), 0.1);
    transform: translateY(-1px);
    border-color: rgba(var(--primary-rgb), 0.2);
  }

  .hero-cta {
    margin-top: 3rem;
    display: flex;
    gap: 1.5rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .trust-signal {
    margin-top: 1.5rem;
    display: flex;
    justify-content: center;
  }
  
  .rating-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.4rem;
  }
  
  .stars {
    color: #FFCA28;
    font-size: 1.25rem;
    letter-spacing: 0.1rem;
    line-height: 1;
  }
  
  .star-half {
    position: relative;
    display: inline-block;
    color: rgba(0, 0, 0, 0.1);
    overflow: hidden;
    vertical-align: top;
  }
  
  .star-half::before {
    content: "★";
    position: absolute;
    left: 0;
    top: 0;
    width: 50%;
    overflow: hidden;
    color: #FFCA28;
  }
  
  .rating-text {
    font-size: 0.85rem;
    color: var(--text-light);
    font-weight: 500;
  }

  .cta-primary {
    background: var(--primary-color);
    color: white;
    padding: 1rem 2.5rem;
    border-radius: 3rem;
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    position: relative;
    border: 2px solid var(--primary-color);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    z-index: 1;
    display: inline-flex;
    align-items: center;
  }

  .cta-primary:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    background: var(--primary-dark);
  }

  .pulse-animation {
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% {
      transform: scale(1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
    50% {
      transform: scale(1.03);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
    }
  }

  .cta-text {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }

  .desktop-text, .mobile-text {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .phone-icon {
    flex-shrink: 0;
  }

  .social-proof {
    font-size: 0.65rem;
    opacity: 0.7;
    font-weight: 400;
    margin-top: 0.2rem;
    color: rgba(255, 255, 255, 0.9);
  }

  .cta-secondary {
    background: rgba(0, 0, 0, 0.05);
    color: var(--text-color);
    padding: 1rem 2.5rem;
    border-radius: 3rem;
    font-weight: 600;
    font-size: 1.1rem;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
  }

  .cta-secondary:hover {
    background: rgba(0, 0, 0, 0.1);
    border-color: rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  .down-arrow {
    font-size: 1.2rem;
    margin-left: 0.2rem;
    animation: bounce 3s ease-in-out infinite;
  }
  
  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(3px);
    }
    60% {
      transform: translateY(2px);
    }
  }

  .service-content {
    padding: 4rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .service-cta-banner {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 3rem;
    border-radius: 1.5rem;
    margin: 4rem 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  .cta-content h3 {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  .cta-content p {
    font-size: 1.1rem;
    opacity: 0.9;
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .primary-button, .secondary-button {
    padding: 1rem 2rem;
    border-radius: 3rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .primary-button {
    background: white;
    color: var(--primary-color);
  }

  .secondary-button {
    background: transparent;
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.5);
  }

  .primary-button:hover, .secondary-button:hover {
    transform: translateY(-2px);
  }

  .primary-button:hover {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  }

  .secondary-button:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: white;
  }

  .service-image {
    margin: -8rem auto 4rem;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    position: relative;
  }

  .service-image img {
    width: 100%;
    height: auto;
    display: block;
  }

  .service-body {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--text-color);
    max-width: 800px;
    margin: 0 auto;
  }

  .locations-section {
    background-color: var(--light-background);
    padding: 6rem 2rem;
    margin: 6rem 0;
  }

  .section-header {
    text-align: center;
    max-width: 600px;
    margin: 0 auto 4rem;
  }

  .section-header h2 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--text-color);
    font-weight: 700;
    letter-spacing: -0.02em;
  }

  .location-search {
    max-width: 600px;
    margin: 0 auto 4rem;
  }

  #suburb-search {
    width: 100%;
    padding: 1.2rem 1.5rem;
    border: 2px solid var(--border-color);
    border-radius: 0.75rem;
    font-size: 1.1rem;
    transition: all 0.3s ease;
    background-color: white;
  }

  #suburb-search:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.1);
    outline: none;
  }

  .states-container {
    display: grid;
    gap: 4rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .state-section h3 {
    font-size: 1.75rem;
    margin-bottom: 2rem;
    color: var(--text-color);
    font-weight: 700;
    letter-spacing: -0.01em;
  }

  .suburbs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1.25rem;
    list-style: none;
    padding: 0;
  }

  .suburb-link {
    display: flex;
    flex-direction: column;
    padding: 1.25rem;
    background-color: white;
    border-radius: 0.75rem;
    text-decoration: none;
    color: var(--text-color);
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
  }

  .suburb-link:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
    border-color: var(--primary-color);
  }

  .suburb-name {
    font-weight: 500;
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
  }

  .region-name {
    font-size: 0.9rem;
    color: var(--text-light);
  }

  .related-services {
    max-width: 1200px;
    margin: 6rem auto;
    padding: 0 2rem;
  }

  .related-services h2 {
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 3rem;
    font-weight: 700;
    letter-spacing: -0.02em;
  }

  .related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
  }

  .related-card {
    background-color: white;
    padding: 2.5rem;
    border-radius: 1rem;
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
  }

  .related-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
    border-color: var(--primary-color);
  }

  .related-card h3 {
    font-size: 1.4rem;
    margin-bottom: 1rem;
    font-weight: 600;
    letter-spacing: -0.01em;
  }

  .related-card p {
    color: var(--text-light);
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }

  .learn-more {
    display: inline-flex;
    align-items: center;
    color: var(--primary-color);
    text-decoration: none;
    font-weight: 600;
    font-size: 1.1rem;
    transition: all 0.3s ease;
  }

  .learn-more:hover {
    transform: translateX(4px);
  }

  .service-footer {
    text-align: center;
    margin: 4rem auto;
    padding: 2rem;
    max-width: 1200px;
    border-top: 1px solid var(--border-color);
  }

  .back-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-color);
    text-decoration: none;
    font-weight: 500;
    font-size: 1rem;
    transition: all 0.2s ease;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    background: var(--light-background);
  }

  .back-link:hover {
    background: var(--border-color);
    transform: translateX(-4px);
  }

  @media (max-width: 768px) {
    .service-container {
      padding: 0;
    }

    .service-hero {
      min-height: 100vh;
      padding: 8rem 1.5rem 4rem;
    }

    .service-cta-banner {
      flex-direction: column;
      text-align: center;
      padding: 2rem;
    }

    .cta-buttons {
      justify-content: center;
      width: 100%;
    }

    .primary-button, .secondary-button {
      width: 100%;
    }

    .hero-cta {
      flex-direction: column;
      gap: 1rem;
    }

    .cta-primary, .cta-secondary {
      width: 100%;
      justify-content: center;
      text-align: center;
    }
    
    .cta-text {
      align-items: center;
    }

    .service-content {
      padding: 3rem 1.5rem;
    }

    .service-image {
      margin: -6rem auto 3rem;
    }

    .service-cta-banner {
      flex-direction: column;
      gap: 1rem;
      padding: 1.5rem;
    }

    .suburbs-grid {
      grid-template-columns: 1fr;
    }

    .related-grid {
      grid-template-columns: 1fr;
    }

    .section-header h2,
    .related-services h2 {
      font-size: 2rem;
    }

    .hero-content {
      padding: 2.5rem;
      margin: 0 1rem;
      background: rgba(255, 255, 255, 0.45);
    }

    .main-title {
      font-size: 2.5rem;
    }

    .service-description {
      font-size: 1.1rem;
    }

    .service-footer {
      margin: 3rem auto;
      padding: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .service-container {
      padding: 0;
    }

    .hero-content {
      padding: 2rem 1.5rem;
      margin: 0 0.5rem;
      background: rgba(255, 255, 255, 0.45);
    }

    .service-hero {
      padding: 6rem 1rem 3rem;
    }

    .service-content {
      padding: 2rem 1rem;
    }

    .service-cta-banner {
      padding: 1.5rem 1rem;
      margin: 3rem 0;
    }

    .locations-section {
      padding: 4rem 1rem;
    }

    .state-section h3 {
      font-size: 1.5rem;
    }

    .section-header {
      padding: 0 0.5rem;
    }

    .related-services {
      padding: 0 1rem;
      margin: 4rem auto;
    }

    .related-card {
      padding: 1.75rem;
    }

    .cta-primary, .cta-secondary {
      padding: 0.85rem 1.5rem;
      font-size: 1rem;
      justify-content: center;
      align-items: center;
    }
    
    .cta-text {
      align-items: center;
    }

    #suburb-search {
      padding: 0.9rem 1rem;
      font-size: 1rem;
    }

    .suburb-link {
      padding: 1rem;
    }

    .suburb-name {
      font-size: 1rem;
    }

    .region-name {
      font-size: 0.8rem;
    }
  }

  /* Mobile/Desktop text toggles */
  .mobile-text {
    display: none;
  }
  
  @media (max-width: 480px) {
    .mobile-text {
      display: inline;
      font-size: 1.1rem;
      font-weight: 700;
    }
    .desktop-text {
      display: none;
    }
    
    .service-container {
      padding: 0;
    }
  }
</style>

<!-- Fix for ensuring the header is visible on mobile -->
<style is:global>
  /* Ensure the site header is always on top */
  .site-header {
    position: fixed;
    z-index: 999 !important;
    width: 100%;
    top: 0;
  }
  
  body {
    padding-top: 74px;
  }
  
  @media (min-width: 768px) {
    body {
      padding-top: 0;
    }
    
    .site-header {
      position: sticky;
    }
  }
</style>

<script>
interface Placeholders {
  [key: string]: string;
}

// Suburb search functionality
document.addEventListener('DOMContentLoaded', () => {
  // Replace all placeholders with default values in the content
  const contentContainer = document.getElementById('content-container');
  if (contentContainer) {
    // Replace text in the content container and all its child nodes
    const replaceText = (element: Node, placeholders: Placeholders): void => {
      // Skip certain elements like script and style tags
      if (element instanceof HTMLElement && (element.tagName === 'SCRIPT' || element.tagName === 'STYLE')) return;

      // Handle text nodes
      if (element.nodeType === Node.TEXT_NODE && element.textContent) {
        let newText = element.textContent;
        for (const [find, replace] of Object.entries(placeholders)) {
          newText = newText.replace(new RegExp(find, 'g'), replace);
        }
        if (element.textContent !== newText) {
          element.textContent = newText;
        }
        return;
      }

      // Recursively process child nodes
      for (const child of element.childNodes) {
        replaceText(child, placeholders);
      }
    };

    // Run the replacement on the content container with all placeholders
    replaceText(contentContainer, {
      '{suburb}': 'Australia',
      '{region}': 'all regions',
      '{state}': 'nationwide'
    });
  }

  // Inject eligibility checker after the second paragraph in content
  const injectEligibilityChecker = () => {
    const contentContainer = document.getElementById('content-container');
    const eligibilityTemplate = document.getElementById('eligibility-checker-template');
    
    if (contentContainer && eligibilityTemplate) {
      // Find all paragraphs in the content (excluding those inside headers)
      const paragraphs = contentContainer.querySelectorAll('p');
      
      if (paragraphs.length >= 2) {
        // Clone the eligibility checker template
        const eligibilityChecker = eligibilityTemplate.cloneNode(true) as HTMLElement;
        eligibilityChecker.id = 'eligibility-checker-injected';
        eligibilityChecker.style.display = 'block';
        eligibilityChecker.style.margin = '3rem 0';
        eligibilityChecker.style.padding = '2rem 0';
        eligibilityChecker.style.borderTop = '1px solid #eee';
        eligibilityChecker.style.borderBottom = '1px solid #eee';
        
        // Insert after the second paragraph
        const secondParagraph = paragraphs[1];
        if (secondParagraph.parentNode) {
          secondParagraph.parentNode.insertBefore(eligibilityChecker, secondParagraph.nextSibling);
        }
        
        console.log('Eligibility checker injected after second paragraph');
      } else {
        console.warn('Less than 2 paragraphs found, eligibility checker not injected');
      }
    }
  };
  
  // Inject eligibility checker after content is processed
  setTimeout(injectEligibilityChecker, 100);
  
  const searchInput = document.getElementById('suburb-search') as HTMLInputElement;
  
  if (searchInput) {
    searchInput.addEventListener('input', (e) => {
      const target = e.target as HTMLInputElement;
      const searchTerm = target.value.toLowerCase();
      const suburbItems = document.querySelectorAll<HTMLLIElement>('.suburb-item');
      
      suburbItems.forEach(item => {
        const suburbName = item.querySelector('.suburb-name')?.textContent?.toLowerCase() || '';
        const regionName = item.querySelector('.region-name')?.textContent?.toLowerCase() || '';
        
        if (searchTerm === '' || suburbName.includes(searchTerm) || regionName.includes(searchTerm)) {
          item.style.display = 'list-item';
        } else {
          item.style.display = 'none';
        }
      });
      
      // Show/hide state sections based on whether they have visible suburbs
      document.querySelectorAll<HTMLElement>('.state-section').forEach(section => {
        const visibleSuburbs = Array.from(section.querySelectorAll<HTMLLIElement>('.suburb-item')).filter(
          item => item.style.display !== 'none'
        ).length;
        
        section.style.display = visibleSuburbs === 0 ? 'none' : 'block';
      });
    });
  }
});
</script> 