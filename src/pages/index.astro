---
import BaseLayout from '../layouts/BaseLayout.astro';
import Card from '../components/Card.astro';

const heroBackground = `/assets/grandmawhite.webp`;

const title = "NDIS Provider Sydney & Melbourne | Home Care, Accommodation, Support";
const description = "Your local NDIS provider in Sydney & Melbourne for SIL & SDA accommodation, 24/7 high-intensity home care, and expert support coordination. No waitlists for key services. Get a free consultation today.";
---

<BaseLayout {title} {description}>
  <!-- Hero Section -->
  <section
    class="hero min-h-[90vh] bg-cover bg-center bg-fixed relative"
    style={`background-image: url('${heroBackground}');`}
  >
    <div class="hero-overlay bg-gradient-to-r from-white/50 to-white/20"></div>
    <div class="hero-content text-center">
      <div class="max-w-3xl bg-white/80 backdrop-blur-xl rounded-3xl p-8 lg:p-12 shadow-2xl border border-white/90">
        <h1 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-primary leading-tight mb-6">
          Your Local NDIS Provider for Home Care, Accommodation & Support
        </h1>
        <p class="text-lg text-base-content/80 max-w-2xl mx-auto mb-8 leading-relaxed">
          Serving families across Sydney & Melbourne with trusted, 24/7 care. We offer SIL & SDA accommodation, high-intensity home support, and expert coordination with no waitlists for key services.
        </p>
        <div class="flex flex-wrap gap-4 justify-center">
          <a href="/contact" class="btn btn-primary btn-lg gap-2 shadow-lg">
            Get a Free Consultation
          </a>
          <a href="tel:+61863869999" class="btn btn-outline btn-lg gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
            Call 08 6386 9999
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Service Showcase -->
  <section class="py-20 bg-base-200">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl lg:text-4xl font-bold text-center text-primary mb-12">
        A Complete Range of NDIS Services
      </h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <a href="/services/disability-home-support-services" class="card bg-base-100 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group">
          <figure class="h-48 overflow-hidden">
            <img src="/assets/homecare.webp" alt="In-Home Support" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
          </figure>
          <div class="card-body text-center">
            <h3 class="card-title justify-center text-lg">In-Home Support</h3>
            <p class="text-sm text-base-content/70">Personalized care, assistance, and high-intensity support in the comfort of your own home.</p>
          </div>
        </a>

        <a href="/services/sil-services" class="card bg-base-100 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group">
          <figure class="h-48 overflow-hidden">
            <img src="/assets/accessible-bathroom.webp" alt="SIL & SDA Accommodation" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
          </figure>
          <div class="card-body text-center">
            <h3 class="card-title justify-center text-lg">SIL & SDA Accommodation</h3>
            <p class="text-sm text-base-content/70">Safe, modern, and supportive housing options tailored to your needs for independent living.</p>
          </div>
        </a>

        <a href="/services/community-access-support" class="card bg-base-100 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group">
          <figure class="h-48 overflow-hidden">
            <img src="/assets/elderlyaboriginal.webp" alt="Community Access" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
          </figure>
          <div class="card-body text-center">
            <h3 class="card-title justify-center text-lg">Community Access</h3>
            <p class="text-sm text-base-content/70">Engage with your community, participate in activities, and build social connections with our support.</p>
          </div>
        </a>

        <a href="/services/ndis-specialist-support-coordination" class="card bg-base-100 shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-2 group">
          <figure class="h-48 overflow-hidden">
            <img src="/assets/carer.webp" alt="Specialist Coordination" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" />
          </figure>
          <div class="card-body text-center">
            <h3 class="card-title justify-center text-lg">Specialist Coordination</h3>
            <p class="text-sm text-base-content/70">Expert guidance to help you understand, implement, and get the most out of your NDIS plan.</p>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!-- Find Your Suburb -->
  <section class="py-20 bg-primary text-primary-content">
    <div class="max-w-3xl mx-auto px-4 text-center">
      <h2 class="text-3xl lg:text-4xl font-bold mb-8">
        Find an NDIS Provider in Your Suburb
      </h2>
      <div class="relative">
        <input
          type="text"
          id="suburb-search"
          placeholder="Start typing any suburb across Australia..."
          class="input input-lg w-full text-base-content border-2 border-warning focus:border-primary focus:outline-none rounded-full px-6"
        />
        <div id="suburb-suggestions" class="hidden absolute w-full bg-base-100 text-base-content rounded-2xl mt-2 max-h-64 overflow-y-auto shadow-xl z-10 text-left border border-base-300"></div>
      </div>
    </div>
  </section>

  <!-- Why Choose Us -->
  <section class="py-20 bg-base-200">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl lg:text-4xl font-bold text-center text-primary mb-12">
        The MD Homecare Difference
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Trust Item 1 -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
          <div class="card-body">
            <div class="flex items-start gap-4">
              <div class="text-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-2">Vetted & Managed Professionals</h3>
                <p class="text-base-content/70 text-sm">We provide consistent, high-quality care you can rely on. Our team is fully managed and vetted, not a random marketplace.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Trust Item 2 -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
          <div class="card-body">
            <div class="flex items-start gap-4">
              <div class="text-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-2">No Waitlists for Key Services</h3>
                <p class="text-base-content/70 text-sm">We offer immediate availability for critical services like in-home support and SIL accommodation to get you the help you need, faster.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Trust Item 3 -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
          <div class="card-body">
            <div class="flex items-start gap-4">
              <div class="text-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-2">Registered Nurse-Led</h3>
                <p class="text-base-content/70 text-sm">Our services are overseen by registered nurses, ensuring clinical excellence and providing your family with total peace of mind.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Trust Item 4 -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
          <div class="card-body">
            <div class="flex items-start gap-4">
              <div class="text-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path>
                  <line x1="16" y1="8" x2="2" y2="22"></line>
                  <line x1="17.5" y1="15" x2="9" y2="15"></line>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-2">Culturally Competent Care</h3>
                <p class="text-base-content/70 text-sm">We celebrate diversity. Our team speaks a variety of languages and understands the cultural needs of the communities we serve.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Trust Item 5 -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
          <div class="card-body">
            <div class="flex items-start gap-4">
              <div class="text-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M16.2 7.8l-4.4 4.4-2.8-2.8"></path>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-2">Transparent Pricing & Budgeting</h3>
                <p class="text-base-content/70 text-sm">No hidden fees. We provide clear pricing and help you maximize your NDIS budget to achieve your goals.</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Trust Item 6 -->
        <div class="card bg-base-100 shadow-sm border border-base-200">
          <div class="card-body">
            <div class="flex items-start gap-4">
              <div class="text-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path d="M12 2a10 10 0 100 20 10 10 0 100-20z"></path>
                  <path d="M12 6v6l4 2"></path>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-2">24/7 Support & High-Intensity Care</h3>
                <p class="text-base-content/70 text-sm">We specialize in complex and high-intensity care, with dedicated support available around the clock.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section class="py-20 bg-info/10">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <h2 class="text-3xl lg:text-4xl font-bold text-primary mb-12">
        Trusted by Families Across Australia
      </h2>
      <div class="card bg-base-100 shadow-xl">
        <div class="card-body py-10 px-8 lg:px-16">
          <div class="text-warning text-3xl mb-4">★★★★★</div>
          <p class="text-lg text-base-content/80 italic leading-relaxed mb-6">
            "MD Homecare has been a lifesaver for our family. The carers are professional, compassionate, and have become like family to us. We finally have peace of mind knowing our son is in the best possible hands. We couldn't recommend them more highly."
          </p>
          <p class="font-bold text-primary">- The Robertson Family, Parramatta</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Resource Hub -->
  <section class="py-20">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl lg:text-4xl font-bold text-center text-primary mb-12">
        Your NDIS Resource Hub
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <Card
          href="/blog/ndis-price-guide"
          title="The 2025 NDIS Price Guide: A Simple Breakdown"
          body="Understand the costs, plan your budget, and get the most out of your NDIS funding with our clear, simple guide."
        />
        <Card
          href="/blog/ndis-support-worker-pay-rates"
          title="Support Worker Pay Rates: What You Need to Know"
          body="Whether you're a client budgeting for care or a worker exploring career options, our guide has the answers."
        />
        <Card
          href="/blog/home-care-packages-australia-complete-guide"
          title="Home Care Packages Explained: A Complete Guide"
          body="Navigating aged care can be confusing. Our guide simplifies the process and explains your options."
        />
      </div>
    </div>
  </section>

  <!-- Service Modal -->
  <dialog id="service-modal" class="modal">
    <div class="modal-box max-w-3xl">
      <form method="dialog">
        <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
      </form>
      <h3 class="font-bold text-xl text-primary mb-6" id="modal-title"></h3>
      <ul id="modal-service-list" class="grid grid-cols-1 sm:grid-cols-2 gap-3"></ul>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>
</BaseLayout>

<script>
  const services = [
    { name: "Accommodation Support", slug: "accommodation-support" },
    { name: "Aged Care Advocacy", slug: "aged-care-advocacy" },
    { name: "Home Modifications", slug: "aged-care-home-modifications-maintenance" },
    { name: "Allied Health", slug: "allied-health-disciplines" },
    { name: "Assistive Technology", slug: "assistive-technology-assessment" },
    { name: "Behaviour Support", slug: "behaviour-support" },
    { name: "Clinical Care", slug: "clinical-care" },
    { name: "Community Access", slug: "community-access-support" },
    { name: "Community Nursing", slug: "community-nursing-care" },
    { name: "Companionship Services", slug: "companionship-services" },
    { name: "Complex Care", slug: "complex-care" },
    { name: "Continence Care", slug: "continence-care-home" },
    { name: "Domestic Assistance", slug: "domestic-assistance" },
    { name: "Home Care Packages", slug: "home-care-packages" },
    { name: "Life Skills Development", slug: "life-skills-development" },
    { name: "Meal Preparation", slug: "meal-preparation-support" },
    { name: "Occupational Therapy", slug: "occupational-therapy-home" },
    { name: "Personal Care", slug: "personal-care" },
    { name: "Physiotherapy", slug: "physiotherapy-home-care" },
    { name: "Plan Management", slug: "plan-management" },
    { name: "Psychosocial Recovery Coaching", slug: "psychosocial-recovery-coaching" },
    { name: "Respite Care", slug: "respite-care" },
    { name: "SIL Services", slug: "sil-services" },
    { name: "Specialist Coordination", slug: "ndis-specialist-support-coordination" },
    { name: "Specialist Disability Accommodation", slug: "specialist-disability-accommodation" },
    { name: "Support Workers", slug: "support-workers" },
    { name: "Transport Services", slug: "transport-services" }
  ];

  const searchInput = document.getElementById('suburb-search') as HTMLInputElement;
  const suggestionsPanel = document.getElementById('suburb-suggestions') as HTMLDivElement;
  const modal = document.getElementById('service-modal') as HTMLDialogElement;
  const modalTitle = document.getElementById('modal-title') as HTMLHeadingElement;
  const modalServiceList = document.getElementById('modal-service-list') as HTMLUListElement;

  let suburbs: { [key: string]: { state: string; region: string } } = {};

  async function fetchSuburbs() {
    try {
      const response = await fetch('/data/australian-suburbs.json');
      if (!response.ok) throw new Error('Network response was not ok');
      suburbs = await response.json();
    } catch (error) {
      console.error('Failed to fetch suburbs:', error);
    }
  }

  function displaySuggestions(input: string) {
    const suburbKeys = Object.keys(suburbs);
    const filteredSuburbs = suburbKeys.filter(suburb => suburb.toLowerCase().startsWith(input));
    suggestionsPanel.innerHTML = '';

    if (filteredSuburbs.length > 0) {
      filteredSuburbs.forEach(suburb => {
        const a = document.createElement('a');
        a.href = '#';
        const state = suburbs[suburb].state;
        const displayName = toTitleCase(suburb.replace(/-/g, ' '));
        a.textContent = `${displayName}, ${state}`;
        a.className = 'block p-4 cursor-pointer transition-all hover:bg-base-200 hover:text-primary hover:translate-x-1 font-medium border-b border-base-200 last:border-b-0';
        a.onclick = (e) => {
          e.preventDefault();
          showServicesForSuburb(suburb);
        };
        suggestionsPanel.appendChild(a);
      });
      suggestionsPanel.classList.remove('hidden');
    } else {
      suggestionsPanel.classList.add('hidden');
    }
  }

  function toTitleCase(str: string) {
    return str.replace(/\w\S*/g, (txt: string) => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());
  }

  function showServicesForSuburb(suburbKey: string) {
    const displayName = toTitleCase(suburbKey.replace(/-/g, ' '));
    modalTitle.textContent = `Available Services in ${displayName}`;
    modalServiceList.innerHTML = '';

    services.forEach(service => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = `/services/${service.slug}/${suburbKey}`;
      a.textContent = service.name;
      a.className = 'block p-3 bg-base-200 rounded-lg hover:bg-primary hover:text-primary-content font-medium transition-all hover:-translate-y-0.5';
      li.appendChild(a);
      modalServiceList.appendChild(li);
    });

    modal.showModal();
    suggestionsPanel.classList.add('hidden');
    searchInput.value = '';
  }

  searchInput.addEventListener('input', () => {
    const input = searchInput.value.toLowerCase();
    if (input.length > 1) {
      displaySuggestions(input);
    } else {
      suggestionsPanel.classList.add('hidden');
    }
  });

  document.addEventListener('click', (e) => {
    const target = e.target as HTMLElement;
    if (!suggestionsPanel.contains(target) && target !== searchInput) {
      suggestionsPanel.classList.add('hidden');
    }
  });

  fetchSuburbs();
</script>
