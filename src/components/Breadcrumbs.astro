---
/**
 * Universal Breadcrumbs Component
 *
 * Generates both visual breadcrumbs and BreadcrumbList schema
 *
 * Usage:
 * <Breadcrumbs items={[
 *   { name: 'Home', url: '/' },
 *   { name: 'Blog', url: '/blog' },
 *   { name: 'Article Title', url: '/blog/article' }
 * ]} />
 */

interface BreadcrumbItem {
  name: string;
  url?: string; // Last item (current page) doesn't need URL
}

interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Generate BreadcrumbList schema
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.name,
    ...(item.url ? { "item": item.url } : {})
  }))
};
---

<!-- Breadcrumb Schema -->
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />

<!-- Visual Breadcrumbs -->
<nav aria-label="Breadcrumb" class="breadcrumbs-nav">
  <ol class="flex flex-wrap items-center justify-center gap-2 text-sm">
    {items.map((item, index) => (
      <li class="flex items-center gap-2">
        {index > 0 && <span class="text-base-content/40">/</span>}
        {item.url ? (
          <a href={item.url} class="text-primary hover:underline transition-colors font-medium">
            {item.name}
          </a>
        ) : (
          <span class="text-base-content/70 font-medium">{item.name}</span>
        )}
      </li>
    ))}
  </ol>
</nav>
