---
import BaseLayout from '../layouts/BaseLayout.astro';
import { Icon } from 'astro-icon/components';

const metaDescription = "Contact MD Home Care for professional in-home care services. Our dedicated care team is available to discuss your home care needs. Call MD Homecare today or send us a message for personalized support.";

const structuredData = {
  "@context": "https://schema.org",
  "@type": "ContactPage",
  "name": "Contact MD Home Care",
  "description": metaDescription,
  "url": "https://mdhomecare.com.au/contact",
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+61405429512",
    "contactType": "customer service",
    "availableLanguage": "English",
    "areaServed": "AU"
  },
  "provider": {
    "@type": "HomeHealthcareService",
    "name": "MD Home Care",
    "description": "Professional in-home care services provider"
  }
};
---

<BaseLayout
  title="Contact Us | MD Home Care"
  description={metaDescription}
  canonical="https://mdhomecare.com.au/contact"
>
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />

  <div class="relative overflow-hidden bg-base-100">
    <!-- Background Decor -->
    <div class="absolute top-0 right-0 -translate-y-1/4 translate-x-1/4 w-[800px] h-[800px] bg-primary/5 rounded-full blur-3xl pointer-events-none"></div>
    <div class="absolute bottom-0 left-0 translate-y-1/4 -translate-x-1/4 w-[600px] h-[600px] bg-secondary/5 rounded-full blur-3xl pointer-events-none"></div>

    <div class="container-custom relative z-10 py-20 lg:py-32">
        <div class="flex flex-col lg:flex-row gap-16 lg:gap-24">
            
            <!-- Left Column: Content & Contact Info -->
            <div class="lg:w-1/2">
                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-primary/10 bg-primary/5 text-primary text-sm font-semibold mb-8 tracking-wide">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                    </span>
                    Taking New Participants
                </div>

                <h1 class="text-5xl lg:text-7xl font-bold text-secondary leading-[1.05] mb-6 tracking-tight text-balance">
                    Let's Start a <br/><span class="text-primary">Conversation.</span>
                </h1>
                
                <p class="text-xl text-secondary/70 font-medium mb-12 leading-relaxed text-balance">
                    Whether you're a participant, a family member, or a provider looking to refer or collaborate, we're here to help.
                </p>

                <div class="space-y-6">
                    <!-- Phone Card -->
                    <a href="tel:+61863869999" class="block group">
                        <div class="bg-primary p-6 rounded-[2rem] shadow-xl shadow-primary/20 hover:shadow-2xl hover:shadow-primary/30 hover:-translate-y-1 transition-all duration-300 flex items-center gap-6">
                            <div class="w-14 h-14 rounded-full bg-white/20 flex items-center justify-center text-white group-hover:scale-110 transition-transform duration-300">
                                <Icon name="hugeicons:call-02" class="h-7 w-7" />
                            </div>
                            <div>
                                <p class="text-white/80 font-bold uppercase tracking-wider mb-1 text-xs">Call Us 24/7</p>
                                <p class="text-3xl font-bold text-white">08 6386 9999</p>
                            </div>
                        </div>
                    </a>
                </div>

                <!-- Trust Indicators -->
                 <div class="mt-12 pt-12 border-t border-base-200">
                    <p class="text-secondary/60 font-medium mb-6">Trusted by families & providers across Sydney & Melbourne</p>
                    <div class="flex items-center gap-4">
                         <div class="flex items-center gap-2 bg-white/50 backdrop-blur px-4 py-2 rounded-full border border-base-200">
                             <div class="flex text-warning">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                  <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                  <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                  <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                  <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                  <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
                                </svg>
                             </div>
                             <span class="font-bold text-secondary text-sm">5.0 Star Rating</span>
                         </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Contact Form -->
            <div class="lg:w-1/2">
                <div class="bg-white rounded-[2.5rem] p-8 lg:p-12 shadow-xl shadow-base-200/50 border border-base-200 relative overflow-hidden">
                    <div class="relative z-10">
                        <h3 class="text-2xl font-bold text-secondary mb-8">Send us a message</h3>
                        
                        <form class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="form-control">
                                    <label class="label text-sm font-bold text-secondary/70 ml-1 mb-1">Full Name / Provider Name</label>
                                    <input type="text" id="name" name="name" placeholder="Name or Organization" class="input input-lg w-full bg-white border-2 border-base-200 focus:border-primary focus:ring-4 focus:ring-primary/10 rounded-2xl transition-all outline-none" required />
                                </div>
                                <div class="form-control">
                                    <label class="label text-sm font-bold text-secondary/70 ml-1 mb-1">Phone Number</label>
                                    <input type="tel" id="phone" name="phone" placeholder="0400 000 000" class="input input-lg w-full bg-white border-2 border-base-200 focus:border-primary focus:ring-4 focus:ring-primary/10 rounded-2xl transition-all outline-none" />
                                </div>
                            </div>

                            <div class="form-control">
                                <label class="label text-sm font-bold text-secondary/70 ml-1 mb-1">Email Address</label>
                                <input type="email" id="email" name="email" placeholder="email@example.com" class="input input-lg w-full bg-white border-2 border-base-200 focus:border-primary focus:ring-4 focus:ring-primary/10 rounded-2xl transition-all outline-none" required />
                            </div>

                            <div class="form-control">
                                <label class="label text-sm font-bold text-secondary/70 ml-1 mb-1">I am a...</label>
                                <select id="service" name="service" class="select select-lg w-full bg-white border-2 border-base-200 focus:border-primary focus:ring-4 focus:ring-primary/10 rounded-2xl transition-all text-base-content/70 font-normal outline-none">
                                    <option value="" disabled selected>Select an option...</option>
                                    <optgroup label="Looking for Care">
                                        <option value="ndis">NDIS Participant</option>
                                        <option value="family">Family Member / Guardian</option>
                                    </optgroup>
                                    <optgroup label="For Providers & Professionals">
                                        <option value="referral">Making a Referral</option>
                                        <option value="partnership">Service Provider / Partnership</option>
                                        <option value="coordinator">Support Coordinator</option>
                                        <option value="allied-health">Allied Health Professional</option>
                                    </optgroup>
                                    <optgroup label="Other">
                                        <option value="job">Job Application / Careers</option>
                                        <option value="other">General Enquiry</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div class="form-control">
                                <label class="label text-sm font-bold text-secondary/70 ml-1 mb-1">Message</label>
                                <textarea id="message" name="message" placeholder="How can we help? If making a referral, please include details." class="textarea textarea-lg w-full bg-white border-2 border-base-200 focus:border-primary focus:ring-4 focus:ring-primary/10 rounded-2xl transition-all min-h-[150px] resize-none outline-none" required></textarea>
                            </div>

                            <div class="pt-4">
                                <button type="submit" class="btn btn-primary btn-lg w-full rounded-[1.5rem] text-lg font-bold shadow-lg shadow-primary/20 hover:shadow-xl hover:shadow-primary/30 hover:-translate-y-1 transition-all duration-300">
                                    Send Message
                                    <Icon name="hugeicons:arrow-right-01" class="h-5 w-5 ml-2" />
                                </button>
                            </div>
                            
                            <p class="text-center text-xs text-secondary/40 mt-6">
                                By submitting this form, you agree to our <a href="/privacy" class="underline hover:text-primary">Privacy Policy</a>.
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>

</BaseLayout>

<script>
  // Add PostHog type declaration
  declare global {
    interface Window {
      posthog?: {
        identify: (id: string, properties?: Record<string, any>) => void;
        capture: (event: string, properties?: Record<string, any>) => void;
      }
    }
  }

  // Form submission handler
  document.querySelector('form')?.addEventListener('submit', (e) => {
    e.preventDefault();

    const form = e.target as HTMLFormElement;
    const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
    const originalHTML = submitButton.innerHTML;
    const name = (form.querySelector('#name') as HTMLInputElement).value;
    const email = (form.querySelector('#email') as HTMLInputElement).value;
    const phone = (form.querySelector('#phone') as HTMLInputElement).value;
    const service = (form.querySelector('#service') as HTMLSelectElement).value;
    const message = (form.querySelector('#message') as HTMLTextAreaElement).value;

    // Track form submission in PostHog
    if (window.posthog) {
      window.posthog.identify(email, {
        name: name,
        email: email,
        phone: phone || undefined,
        last_seen: new Date().toISOString()
      });

      window.posthog.capture('contact_form_submitted', {
        name: name,
        email: email,
        phone: phone || undefined,
        service_type: service || undefined,
        message: message,
        message_length: message.length
      });
    }

    // Disable form and show sending status
    submitButton.disabled = true;
    submitButton.innerHTML = '<span class="loading loading-spinner loading-sm"></span> Sending...';
    Array.from(form.elements).forEach(element => {
      if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement || element instanceof HTMLSelectElement) {
        element.disabled = true;
      }
    });

    // Simulate sending
    setTimeout(() => {
      submitButton.innerHTML = 'Message Sent!';
      submitButton.classList.remove('btn-primary');
      submitButton.classList.add('btn-success');

      setTimeout(() => {
        form.reset();
        submitButton.innerHTML = originalHTML;
        submitButton.disabled = false;
        submitButton.classList.remove('btn-success');
        submitButton.classList.add('btn-primary');

        Array.from(form.elements).forEach(element => {
          if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement || element instanceof HTMLSelectElement) {
            element.disabled = false;
          }
        });
      }, 2000);
    }, 1500);
  });

  // Track email identification
  document.querySelector('#email')?.addEventListener('blur', (e) => {
    const email = (e.target as HTMLInputElement).value;
    const name = (document.querySelector('#name') as HTMLInputElement)?.value;
    if (email && window.posthog) {
      window.posthog.identify(email, {
        name: name || undefined,
        email: email,
        last_seen: new Date().toISOString()
      });
    }
  });
</script>